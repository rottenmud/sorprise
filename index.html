<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Bun</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* --- RESET & BASIC SETUP --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        html, body {
            margin: 0; padding: 0;
            width: 100%; height: 100vh;
            overflow: hidden;
            background: radial-gradient(circle at center, #fff0f5, #ffc3d9);
            font-family: 'Quicksand', sans-serif;
        }

        /* --- BACKGROUND CANVAS --- */
        #canvas-bg {
            position: fixed; inset: 0;
            z-index: 1; pointer-events: none;
        }

        /* --- START SCREEN --- */
        #start-screen {
            position: fixed; inset: 0;
            background: #fff0f5;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 999;
            transition: opacity 0.8s ease;
        }
        .heart-btn {
            width: 80px; height: 80px;
            background: #ff5f9e;
            transform: rotate(45deg);
            animation: pulse 1.2s infinite;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 95, 158, 0.6);
        }
        .heart-btn::before, .heart-btn::after {
            content: ""; width: 80px; height: 80px;
            background: #ff5f9e;
            border-radius: 50%;
            position: absolute;
        }
        .heart-btn::before { left: -40px; }
        .heart-btn::after { top: -40px; }
        
        .start-text {
            margin-top: 60px;
            font-size: 24px;
            color: #ff5f9e;
            font-family: 'Dancing Script', cursive;
            letter-spacing: 2px;
        }
        @keyframes pulse { 0%, 100% { transform: rotate(45deg) scale(1); } 50% { transform: rotate(45deg) scale(1.1); } }

        /* --- MAIN LAYOUT --- */
        .main-container {
            position: relative;
            width: 100%; height: 100%;
            display: flex;
            opacity: 0;
            z-index: 10;
            transition: opacity 1s ease;
        }

        /* Left/Top Area (Card) & Right/Bottom Area (Flower) */
        .area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* --- THE CARD --- */
        .card-box {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 20px;
            width: 85%;
            max-width: 450px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transform: translateY(30px);
            opacity: 0;
            transition: all 1s ease;
            white-space: pre-wrap; /* Preserves line breaks in the JS string */
            font-size: 16px;
            line-height: 1.6;
            color: #555;
            border: 2px solid rgba(255,255,255,0.8);
        }

        /* --- HEADER & FLOWER WRAPPER --- */
        .flower-container-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .header-title {
            text-align: center;
            margin-bottom: 20px;
            z-index: 20;
        }
        .header-title h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 50px;
            margin: 0;
            background: linear-gradient(45deg, #ff5f9e, #ff9966);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 2px 4px rgba(255, 95, 158, 0.3));
        }
        .header-title h2 {
            margin: 5px 0 0 0;
            font-size: 18px;
            letter-spacing: 4px;
            color: #ff8fba;
            text-transform: uppercase;
        }

        /* --- THE FLOWER ANIMATION --- */
        .flower-wrapper {
            position: relative;
            width: 200px; 
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: flex-end;
        }

        .stem {
            width: 8px; height: 0;
            background: linear-gradient(to top, #2e7d32, #66bb6a);
            border-radius: 4px;
            transition: height 2s ease-in-out;
        }

        .flower-head {
            position: absolute;
            bottom: 100%; /* Sits on top of stem */
            width: 150px; height: 150px;
            display: flex; justify-content: center; align-items: center;
            transform: scale(0);
            transition: transform 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-origin: bottom center;
        }

        .petal {
            position: absolute;
            width: 60px; height: 100px;
            background: linear-gradient(to top, #ffc3d9, #ff4081);
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transform-origin: bottom center;
        }
        
        /* Petal Rotation */
        .p1 { transform: rotate(0deg) translateY(-30px); }
        .p2 { transform: rotate(60deg) translateY(-30px); }
        .p3 { transform: rotate(120deg) translateY(-30px); }
        .p4 { transform: rotate(180deg) translateY(-30px); }
        .p5 { transform: rotate(240deg) translateY(-30px); }
        .p6 { transform: rotate(300deg) translateY(-30px); }

        .center-dot {
            position: absolute;
            width: 40px; height: 40px;
            background: #ffeb3b;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 235, 59, 0.6);
            z-index: 5;
        }

        /* Animation States */
        .grow { height: 220px; }
        .bloom { transform: scale(1); }
        .sway { animation: swaying 5s ease-in-out infinite alternate; }
        
        @keyframes swaying {
            0% { transform: rotate(-3deg); }
            100% { transform: rotate(3deg); }
        }

        .show-card { opacity: 1; transform: translateY(0); }

        /* --- RESPONSIVE DESIGN (FIXES OVERLAP) --- */
        /* Desktop: Row (Text Left, Flower Right) */
        @media (min-width: 768px) {
            .main-container { flex-direction: row; }
        }
        /* Mobile: Column (Flower Top, Text Bottom) */
        @media (max-width: 767px) {
            .main-container { flex-direction: column-reverse; }
            .flower-wrapper { height: 250px; }
            .stem.grow { height: 180px; }
            .card-box { width: 90%; margin-bottom: 20px; padding: 20px; }
            .header-title h1 { font-size: 40px; }
        }
    </style>
</head>
<body>

    <audio id="bgMusic" loop src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_27565e6650.mp3"></audio>

    <canvas id="canvas-bg"></canvas>

    <div id="start-screen">
        <div class="heart-btn" id="startBtn"></div>
        <div class="start-text">Tap for a surprise</div>
    </div>

    <div class="main-container" id="main">
        
        <div class="area">
            <div class="card-box" id="card"></div>
        </div>

        <div class="area">
            <div class="flower-container-wrapper">
                <div class="header-title">
                    <h1>Bun</h1>
                    <h2>Happy Birthday</h2>
                </div>
                
                <div class="flower-wrapper" id="flowerWrapper">
                    <div class="stem" id="stem">
                        <div class="flower-head" id="head">
                            <div class="petal p1"></div>
                            <div class="petal p2"></div>
                            <div class="petal p3"></div>
                            <div class="petal p4"></div>
                            <div class="petal p5"></div>
                            <div class="petal p6"></div>
                            <div class="center-dot"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- ELEMENTS ---
        const startScreen = document.getElementById("start-screen");
        const startBtn = document.getElementById("startBtn");
        const main = document.getElementById("main");
        const bgMusic = document.getElementById("bgMusic");
        const stem = document.getElementById("stem");
        const head = document.getElementById("head");
        const flowerWrapper = document.getElementById("flowerWrapper");
        const card = document.getElementById("card");

        // --- THE MESSAGE (Backticks allow multi-line text) ---
        const msg = `Happy Birthday Bun!

Alam mo, kahit anong mangyari, I will always "carrot" (care at) love you.

Pero seryoso, thank you, always. Enjoy your day today kasi deserve na deserve mo lahat ng treats at happiness sa mundo.

Stay cute and amazing always.

Happy Birthday!

From Plu ðŸ¥•ðŸ°`;

        // --- START SEQUENCE ---
        startBtn.onclick = () => {
            // 1. Play Music
            bgMusic.volume = 0.4;
            bgMusic.play().catch(e => console.log("Audio prevented: " + e));
            
            // 2. Vibrate (Mobile only)
            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);

            // 3. Fade out start screen
            startScreen.style.opacity = 0;
            setTimeout(() => { startScreen.remove(); }, 800);

            // 4. Fade in Main & Animate Flower
            main.style.opacity = 1;
            setTimeout(() => {
                stem.classList.add("grow");
                // Wait for stem to grow, then bloom
                setTimeout(() => {
                    head.classList.add("bloom");
                    flowerWrapper.classList.add("sway"); // Start swaying after bloom
                }, 2000);
            }, 500);

            // 5. Show Card & Type Text
            setTimeout(() => {
                card.classList.add("show-card");
                typeWriter();
            }, 3000); // Waits for flower to finish mostly

            // 6. Start Falling Particles
            initParticles();
        };

        // --- TYPEWRITER EFFECT ---
        let i = 0;
        function typeWriter() {
            if (i < msg.length) {
                card.textContent += msg.charAt(i);
                i++;
                // Add slight randomness to typing speed for realism
                setTimeout(typeWriter, Math.random() * 30 + 30); 
            }
        }

        // --- PARTICLE BACKGROUND (Falling Hearts) ---
        function initParticles() {
            const canvas = document.getElementById("canvas-bg");
            const ctx = canvas.getContext("2d");
            
            // Set canvas size
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });

            let hearts = [];
            
            // Create 40 hearts
            for(let i=0; i<40; i++) {
                hearts.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 15 + 10, // Size between 10 and 25
                    speed: Math.random() * 1 + 0.5,
                    angle: Math.random() * 6 // For swaying
                });
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                hearts.forEach(h => {
                    // Update position
                    h.y += h.speed;
                    h.x += Math.sin(h.angle) * 0.5; // Sway side to side
                    h.angle += 0.02;

                    // Reset if goes off screen
                    if(h.y > canvas.height + 20) {
                        h.y = -20;
                        h.x = Math.random() * canvas.width;
                    }

                    // Draw Heart
                    drawHeart(ctx, h.x, h.y, h.size);
                });

                requestAnimationFrame(draw);
            }

            function drawHeart(c, x, y, s) {
                c.fillStyle = "rgba(255, 182, 193, 0.6)"; // Light Pink
                c.beginPath();
                // Heart shape logic using Bezier curves
                let topCurveHeight = s * 0.3;
                c.moveTo(x, y + topCurveHeight);
                // Top left curve
                c.bezierCurveTo(
                    x, y, 
                    x - s / 2, y, 
                    x - s / 2, y + topCurveHeight
                );
                // Bottom left curve
                c.bezierCurveTo(
                    x - s / 2, y + (s + topCurveHeight) / 2, 
                    x, y + (s + topCurveHeight) / 2, 
                    x, y + s
                );
                // Bottom right curve
                c.bezierCurveTo(
                    x, y + (s + topCurveHeight) / 2, 
                    x + s / 2, y + (s + topCurveHeight) / 2, 
                    x + s / 2, y + topCurveHeight
                );
                // Top right curve
                c.bezierCurveTo(
                    x + s / 2, y, 
                    x, y, 
                    x, y + topCurveHeight
                );
                c.fill();
            }

            draw(); // Start loop
        }
    </script>
</body>
</html>
